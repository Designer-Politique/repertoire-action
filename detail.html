<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>D√©tail de l'action</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="page-header">
    <img src="logo.png" alt="Logo du r√©pertoire">
  </header>

  <div class="post" id="actionDetail"></div>

  <!-- fallback JSON embarqu√© (remplace par ton JSON complet si tu veux) -->
  <script id="actions-data" type="application/json">
  [
    { "id": 1, "titre": "Signer une p√©tition", "facilite": "Facile", "echelle": "Individuel", "rapidite": "Rapide", "description": "Signer une p√©tition en ligne ou papier pour montrer son soutien √† une cause.", "liens": ["https://www.change.org"] },
    { "id": 2, "titre": "Organiser une manifestation", "facilite": "Difficile", "echelle": "Collectif", "rapidite": "Lent", "description": "Planifier, d√©clarer en pr√©fecture et mobiliser des personnes pour manifester.", "liens": ["https://www.service-public.fr"] }
  ]
  </script>

  <script>
    async function loadAction() {
      let actions = [];
      try {
        const res = await fetch('actions.json');
        if (!res.ok) throw new Error('HTTP ' + res.status);
        actions = await res.json();
      } catch (err) {
        console.warn('fetch failed ‚Äî using embedded JSON', err);
        const embed = document.getElementById('actions-data');
        try { actions = JSON.parse(embed.textContent); } catch(e){ actions = []; }
      }

      const params = new URLSearchParams(window.location.search);
      const id = parseInt(params.get('id'));
      const action = actions.find(a => a.id === id);

      const container = document.getElementById('actionDetail');
      if (!action) { container.innerHTML = '<div class="post-content">Action introuvable.</div>'; return; }

      container.innerHTML = `
        <div class="post-header">${action.titre}</div>
        <div class="post-content">
          <div class="post-description">${action.description}</div>
          <div><strong>Facilit√© :</strong> ${action.facilite}</div>
          <div><strong>√âchelle :</strong> ${action.echelle}</div>
          <div><strong>Rapidit√© :</strong> ${action.rapidite}</div>
          <div class="tags">
            ${ (action.liens || []).map(l => `<a class="tag" href="${l}" target="_blank">üîó ${l}</a>`).join(' ') }
          </div>
        </div>
        <div class="post-footer"><a class="back" href="action.html">‚Üê Retour au r√©pertoire</a></div>
      `;
    }
    loadAction();
  </script>
</body>
</html>
